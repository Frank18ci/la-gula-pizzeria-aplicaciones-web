<h2 mat-dialog-title>{{pizzaId ? 'Editar' : 'Agregar'}} Pizza</h2>
<div mat-dialog-content class="bg-gray-50 rounded-xl p-6 shadow-sm">
    <form class="grid grid-cols-1 md:grid-cols-2 gap-6" [formGroup]="form" enctype="multipart/form-data">
        <!-- Columna izquierda -->
        <div class="flex flex-col gap-4">
            <mat-form-field class="w-full *:px-3">
                <mat-label>Nombre</mat-label>
                <input matInput formControlName="name" name="name" required>
            </mat-form-field>

            <mat-form-field class="w-full *:px-3">
                <mat-label>Precio base (S/.)</mat-label>
                <input matInput type="number" formControlName="basePrice" name="basePrice" required>
            </mat-form-field>

            <mat-form-field class="w-full *:px-3">
                <mat-label>Descripción</mat-label>
                <textarea matInput formControlName="description" name="description" required rows="4"></textarea>
            </mat-form-field>

        </div>

        <!-- Columna derecha -->
        <div class="flex flex-col gap-4">

            <mat-form-field class="w-full *:px-3">
                <mat-label>Toppings</mat-label>
                <mat-select formControlName="toppingIds" name="toppingIds" multiple>
                    @for (topping of toppings; track topping.id) {
                      <mat-option [value]="topping.id">{{topping.name}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full *:px-3">
                <mat-label>Activo</mat-label>
                <mat-select formControlName="active" name="active" required>
                    <mat-option [value]="true">Sí</mat-option>
                    <mat-option [value]="false">No</mat-option>
                </mat-select>
            </mat-form-field>

            <!-- Group inferior -->
            <div class="col-span-full grid md:grid-cols-2 lg:grid-cols-2 gap-4">
                <div
                    class="w-full *:px-3 mb-4 col-span-2 mat-elevation-z1 rounded-md border border-gray-300 p-3 bg-gray-300">
                    <label class="mat-label text-sm font-medium text-gray-700">Imagen</label>
                    <input type="file" accept="image/*" (change)="onFileSelected($event)" name="image"
                        class="mt-2 block w-full text-sm" />
                    @if(nombreImagen){
                    <p class="text-xs text-gray-500 mt-1">
                        Archivo seleccionado: {{ nombreImagen }}
                    </p>
                    }
                </div>
            </div>
        </div>
    </form>
</div>
<div mat-dialog-actions align="end">
    <button mat-button (click)="closeDialog()">Cancelar</button>
    <button mat-raised-button color="primary" (click)="savePizza()" [disabled]="form.invalid">
        {{pizzaId ? 'Actualizar' : 'Guardar'}}
    </button>
</div>